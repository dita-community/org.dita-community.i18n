<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Setting the Transformer Factory for Command Line Use</title><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="schema.DC" href="http://purl.org/dc/terms/"><meta name="DC.Type" content="topic"><meta name="prodname" content="org.dita-community.i18n"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="DC.Creator" content="Eliot Kimber"><meta name="rights" content="© 2016 DITA Community Project"><meta name="DC.Date.Created" content="2016-10-08"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="setting_the_transformer_factory_for_command_line_use"><script type="text/javascript">var d4p = {"relativePath":"..\/","dev":false,"debug":false,"draft":false,"nextTopicHref":"topics\/setting_the_transformer_factory_for_oxygenxml.html","previousTopicHref":"topics\/transformer-configuration-setup.html","ext":".html","root":false,"topic":{"chunked":""},"map":{"title":"DITA Community Internationalization Plugin","version":1,"chunked":false},"search":{"minlength":2},"l":{"searchPageHeading":"Search Results","close":"Close"}}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="../themes/dita-d4p-classic/css/style.css"><link rel="stylesheet" type="text/css" media="screen, projection, print" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,
          
          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,
          
          // Optional callback... myCallback(i, width)
          callback: doc_resize,
          
          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  = mobile.css',
             // medium (size-1, size-2)
            '760px  to 980px  = 720.css',
            '980px  to 1270px = 960.css',
             // large (size-3, size-5)
            '1270px to 1600px = 1200.css',
            '1600px to 1940px = 1560.css',
             // extra large (size-6)
            '1940px to 2540px = 1920.css',
            '2540px           = 2520.css'
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="../themes/dita-d4p-classic/js/script.js"></script></head><body class="en-us dita-d4p-classic centered navigation-default"><div id="d4h5-main-container" class="container_12" role="application"><header role="banner" aria-labelledby="publication-title" class="hide-for-small"><div class="grid_8"><h1 id="publication-title">DITA Community Internationalization Plugin</h1></div><section class="grid_4 search-box"><form id="search" role="search"><div class="form-group"><input id="search-text" type="text" autocomplete="off" class="form-control" placeholder="Search"></div></form></section><secion class="clearfix"></secion></header><div id="d4h5-section-container" class="grid_12"><nav id="local-navigation" class="grid_4 alpha omega" role="navigation" aria-label="Main navigation"><div id="nav-content"><ul><li><a href="../index.html">Table of Contents</a></li><li class="collapsible active"><a href="dita_community_internationalization_plugin.html">DITA Community Internationalization Plugin</a><ul><li class="collapsible active"><a href="installation.html">Installation</a><ul><li><a href="deploying-i18n-plugin.html">Deploying the i18n Open Toolkit Plugin</a></li><li class="collapsible active"><a href="transformer-configuration-setup.html">Setting Up The Saxon Transformer Factory Configuration</a><ul><li class=" active"><a href="setting_the_transformer_factory_for_command_line_use.html" class=" selected">Setting the Transformer Factory for Command Line Use</a></li><li><a href="setting_the_transformer_factory_for_oxygenxml.html">Setting the Transformer Factory for oXygenXML</a></li></ul></li></ul></li><li><a href="doing_line_and_word_breaking_in_xslt.html">Doing Line and Word Breaking in XSLT</a></li><li><a href="estimating_rendered_string_length_in_xslt.html">Estimating Rendered String Length in XSLT</a></li><li><a href="external_resources.html">External Resources</a></li></ul></li></ul></div></nav><div id="d4h5-main-content" class="grid_8 alpha omega"><article><nav id="content-toolbar" class="toolbar hide-for-small"></nav><section id="page"><div><a id="setting_the_transformer_factory_for_command_line_use" class="anchor"></a> <h1 class="title topictitle1">Setting the Transformer Factory for Command Line Use</h1> <div class="body"> <div class="p">If you are running the Open Toolkit from a command line you can specify the <span class="keyword parmname">javax.xml.transform.TransformerFactory</span> property on the <span class="keyword cmdname">ant</span> or <span class="keyword cmdname">dita</span> command line directly using a <span class="keyword parmname">-D</span> parameter:<pre class="pre codeblock">c:\DITA-OT&gt;dita -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91 
-i /Users/ekimber/workspace/Thunderbird/User-Guide.ditamap ...</pre></div> <p class="p">You can also use the <var class="keyword varname">ANT_OPTS</var> environment variable to specify the property using the <span class="keyword parmname">-D</span> Java command-line parameter:</p> <div class="p">Windows:<pre class="pre codeblock">c:\DITA-OT&gt;set ANT_OPTS="-Xmx512m  -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91"</pre></div> <p class="p">macOS and Linux:</p> <div class="p"> <pre class="pre codeblock">ekimber$ export ANT_OPTS="-Xmx512m  -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91"</pre> </div> <p class="p">If you are using the 1.8.5 Open Toolkit, you can modify the <span class="ph filepath">startcmd.sh</span> or <span class="ph filepath">startcmd.bat</span> file to set the ANT_OPTS environment variable, e.g.:</p> <div class="p">Windows:<pre class="pre codeblock">...
REM Set environment variables
set ANT_OPTS=-Xmx512m %ANT_OPTS%
<strong class="ph b">set ANT_OPTS=%ANT_OPTS% -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91</strong>
set ANT_HOME=%DITA_DIR%
...</pre></div> <p class="p">macOS and Linux:</p> <pre class="pre codeblock">...
export ANT_OPTS="-Xmx512m $ANT_OPTS"
<strong class="ph b">export ANT_OPTS="$ANT_OPTS -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91"</strong>
export ANT_HOME="$DITA_DIR"
...</pre> <p class="p">For DITA OT 2.x and later you can set the <var class="keyword varname">ANT_OPTS</var> environment variable globally.</p> <p class="p">You can test that the transformer factory is correctly configured by running the Ant target "org.dita-community-i18n-xslt-test":</p> <pre class="pre codeblock">ekimber$ ant org.dita-community-i18n-xslt-test 
Buildfile: /Users/ekimber/dita-ot/DITA-OT/build.xml

org.dita-community-i18n-xslt-test:
     [echo] org.dita-community.i18n XSLT collator test
     [echo] ANT_OPTS="-Xmx512m  -Djavax.xml.transform.TransformerFactory=org.ditacommunity.i18n.saxon.DCI18nSaxonTransformerFactoryImpl91"
     [xslt] Processing /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/resources/source-data/test-zh-cn.xml to /Users/ekimber/dita-ot/DITA-OT/out/zh-cn-xslt-test.html
     [xslt] Loading stylesheet /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/xsl/test-collator.xsl
     [xslt] DCI18nSaxonTransformerFactoryImpl: Setting collation URI resolver to DCI18nCollationUriResolver91
     [xslt]  + [INFO] Processing source document file:/Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/resources/source-data/test-zh-cn.xml...
     [xslt]  + [INFO] Using collator "http://org.dita-community.i18n.zhCNawareCollator?lang=zh-CN"
     [xslt] DCI18nCollationUriResolver91 version 1.0.0
     [xslt] + [DEBUG] DCI18nCollationUriResolver91.resolve(): Collation URI="http://org.dita-community.i18n.zhCNawareCollator?lang=zh-CN"
     [xslt] + [DEBUG] DCI18nCollationUriResolver91.resolve():   Returning ZhCnAwareCollator
     [xslt] + [DEBUG] splitWords(): text="从前有一位楚国人, 他非常爱惜他的宝剑。", debug=false
     [xslt]  + [INFO] Document processed.

BUILD SUCCESSFUL
Total time: 1 second</pre> <p class="p">The output of the test is in the <span class="ph filepath">out/</span> directory under the DITA OT directory.</p> <div class="p">If you see a result like this:<pre class="pre codeblock">ekimber$ ant org.dita-community.i18n-xslt-test 
Buildfile: /Users/ekimber/dita-ot/DITA-OT/build.xml

org.dita-community.i18n-xslt-test:
     [echo] org.dita-community.i18n XSLT collator test
     [echo] ANT_OPTS="${env.ANT_OPTS}"
     [xslt] Processing /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/resources/source-data/test-zh-cn.xml to /Users/ekimber/dita-ot/DITA-OT/out/zh-cn-xslt-test.html
     [xslt] Loading stylesheet /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/xsl/test-collator.xsl
     [xslt]  + [INFO] Processing source document file:/Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/resources/source-data/test-zh-cn.xml...
     [xslt]  + [INFO] Using collator "http://org.dita-community.i18n.zhCNawareCollator?lang=zh-CN"
     [xslt] /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/xsl/test-collator.xsl:82: Fatal Error! Unknown collation http://org.dita-community.i18n.zhCNawareCollator?lang=zh-CN
     [xslt] Failed to process /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/resources/source-data/test-zh-cn.xml

BUILD FAILED
/Users/ekimber/dita-ot/DITA-OT/build.xml:175: Fatal error during transformation using /Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/xsl/test-collator.xsl: Unknown collation http://org.dita-community.i18n.zhCNawareCollator?lang=zh-CN; SystemID: file:/Users/ekimber/dita-ot/DITA-OT/plugins/org.dita-community.i18n/test/xsl/test-collator.xsl; Line#: 82; Column#: -1

Total time: 0 seconds</pre></div> <p class="p">It means the <span class="keyword parmname">javax.xml.transform.TransformerFactory</span> property is not set correctly.</p> </div> <footer id="topicsNPLinks"><div id="footer_previous"><a href="../topics/transformer-configuration-setup.html" class="previous" rel="internal">Setting Up The Saxon Transformer Factory Configuration</a></div><div id="footer_next"><a href="../topics/setting_the_transformer_factory_for_oxygenxml.html" class="next" rel="internal">Setting the Transformer Factory for oXygenXML</a></div></footer></div></section></article><div class="clear"></div></div><div class="clearfix"></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"></div></div></body></html>