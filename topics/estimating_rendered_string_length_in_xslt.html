<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="DC.Type" content="concept"><meta name="description" content="You can use the i18n library to estimate the rendered length of strings with reasonable accuracy (if you know the font details)."><meta name="DC.Relation" scheme="URI" content="../topics/dita_community_internationalization_plugin.html"><meta name="prodname" content="org.dita-community.i18n"><meta name="version" content="1"><meta name="release" content="0"><meta name="modification" content="0"><meta name="DC.Creator" content="Eliot Kimber"><meta name="rights" content="Â© 2016 DITA Community Project"><meta name="DC.Date.Created" content="2016-10-08"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="estimating_rendered_string_length_in_xslt"><link rel="stylesheet" type="text/css" href="../commonltr.css"><link rel="stylesheet" type="text/css" href="../dita-ot-doc.css"><title>Estimating Rendered String Length in XSLT</title></head><body id="estimating_rendered_string_length_in_xslt"><nav role="toc"><ul><li><a href="../topics/dita_community_internationalization_plugin.html">DITA Community Internationalization Plugin</a><ul><li><a href="../topics/installation.html">Installation</a><ul><li><a href="../topics/deploying-i18n-plugin.html">Deploying the i18n Open Toolkit Plugin</a></li><li><a href="../topics/transformer-configuration-setup.html">Setting Up The Saxon Transformer Factory Configuration</a><ul><li><a href="../topics/setting_the_transformer_factory_for_command_line_use.html">Setting the Transformer Factory for Command Line Use</a></li><li><a href="../topics/setting_the_transformer_factory_for_oxygenxml.html">Setting the Transformer Factory for oXygenXML</a></li></ul></li></ul></li><li><a href="../topics/using_the_i18n_collator_from_xslt.html">Using the i18n Collator from XSLT</a></li><li><a href="../topics/doing_line_and_word_breaking_in_xslt.html">Doing Line and Word Breaking in XSLT</a></li><li class="active"><a href="../topics/estimating_rendered_string_length_in_xslt.html">Estimating Rendered String Length in XSLT</a></li><li><a href="../topics/how_it_works.html">How It Works</a></li><li><a href="../topics/external_resources.html">External Resources</a></li></ul></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
 <h1 class="title topictitle1" id="ariaid-title1">Estimating Rendered String Length in XSLT</h1>
 
 <div class="body conbody"><p class="shortdesc">You can use the i18n library to estimate the rendered length of strings with reasonable
    accuracy (if you know the font details).</p>
  <p class="p">The <code class="ph codeph">dci18n:getRenderedTextLength()</code> function takes a string and a font
      specification (font name, size, and variant) and returns an estimate of its rendered length
      for that font. It uses the standard Java2D library under the covers. If the font specified is
      available to Java then it should provide a reasonably accurate estimate of the length,
      especially for shorter strings. The estimate will not reflect subtleties like kerning or
      custom inter-word spacing that some layout engines may apply but it's usually accurate to
      within about one en-width for an 80-character string.</p>
    <p class="p">The main challenge is getting the font details correctly. As for all things involving fonts
      that usually requires operating-system- and operating-environment-specific configuration. See
      the Oracle-provided Java2D documentation for details on how to specify fonts. For macOS and
      Windows it should access installed fonts using the font name shown in the operating system
      font catalog. For Linux systems the configuration may be different.</p>
    <div class="p">For example, to determine the longest term in a set of definition list entries you could do
      something like
      this:<pre class="pre codeblock"><code>...
&lt;!-- Context is a &lt;dl&gt; element --&gt;
&lt;xsl:variable name="terms" as="xs:string*"
  select="normalize-space(*[contains(@class, ' topic/dlentry ']/
                          *[contains(@class, ' topic/dt ']"
/&gt;
&lt;xsl:variable name="maxLength" as="double()"
 select="max(for $t in $terms 
                 return dci18n:getdci18n:getRenderedTextLength($t, 'Arial', '12', 'normal')
        "
/&gt;
...</code></pre></div>
    <p class="p">You can use the rendered length estimator with line breaking to do pretty good layout of
      text, for example, to generate fixed-layout HTML using absolutely positioned CSS.</p>
 </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/dita_community_internationalization_plugin.html">DITA Community Internationalization Plugin</a></div></div></nav></article></main></body></html>